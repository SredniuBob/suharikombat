<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚Çø CRYPTO KOMBAT - –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* ====== –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a73e8;
            --secondary: #0d47a1;
            --accent: #00c853;
            --danger: #ff4444;
            --warning: #ff9800;
            --dark: #121212;
            --light: #f8f9fa;
            --gray: #757575;
        }

        body {
            background: linear-gradient(135deg, #0a1929, #1a237e);
            color: white;
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
        }

        /* ====== –ù–ê–í–ò–ì–ê–¶–ò–Ø ====== */
        .nav-tabs {
            display: flex;
            overflow-x: auto;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-tabs button {
            flex: 1;
            min-width: 70px;
            padding: 12px 8px;
            background: transparent;
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
            margin: 0 2px;
        }

        .nav-tabs button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-tabs button.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            box-shadow: 0 4px 15px rgba(26, 115, 232, 0.3);
        }

        .nav-tabs button span {
            font-size: 1.4rem;
        }

        /* ====== –°–ï–ö–¶–ò–ò ====== */
        .section {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            min-height: calc(100vh - 70px);
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ====== –û–ë–©–ò–ï –≠–õ–ï–ú–ï–ù–¢–´ ====== */
        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 18px 15px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-card h3 {
            color: #4fc3f7;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .stat-card .value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00e676;
        }

        .click-btn {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: 5px solid #4fc3f7;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.1s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(26, 115, 232, 0.4);
        }

        .click-btn:active {
            transform: scale(0.95);
            box-shadow: 0 5px 15px rgba(26, 115, 232, 0.3);
        }

        .buy-btn, .action-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #00c853, #00e676);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .buy-btn:hover:not(:disabled), .action-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 200, 83, 0.3);
        }

        .buy-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #666;
        }

        /* ====== PvP –ê–†–ï–ù–ê ====== */
        .pvp-arena {
            text-align: center;
        }

        .battle-timer {
            font-size: 3rem;
            font-weight: bold;
            color: #ff4444;
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
        }

        .players-container {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
        }

        .player {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            min-width: 150px;
        }

        .player-score {
            font-size: 2.5rem;
            font-weight: bold;
            color: #00e676;
            margin: 10px 0;
        }

        .vs {
            font-size: 2rem;
            font-weight: bold;
            color: #ff9800;
            display: flex;
            align-items: center;
        }

        .pvp-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        /* ====== NFT –°–ò–°–¢–ï–ú–ê ====== */
        .nft-shop {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .nft-box {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .nft-box:hover {
            transform: translateY(-5px);
            border-color: #4fc3f7;
        }

        .nft-box.basic { border-color: #757575; }
        .nft-box.premium { border-color: #2196f3; }
        .nft-box.legendary { border-color: #ffd700; }

        .nft-price {
            font-size: 1.2rem;
            color: #00e676;
            font-weight: bold;
            margin: 10px 0;
        }

        .nft-inventory {
            margin-top: 30px;
        }

        .nft-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #4fc3f7;
        }

        .nft-item.legendary { border-left-color: #ffd700; background: linear-gradient(135deg, rgba(255,215,0,0.1), transparent); }
        .nft-item.epic { border-left-color: #9c27b0; background: linear-gradient(135deg, rgba(156,39,176,0.1), transparent); }
        .nft-item.rare { border-left-color: #2196f3; background: linear-gradient(135deg, rgba(33,150,243,0.1), transparent); }
        .nft-item.uncommon { border-left-color: #4caf50; }
        .nft-item.common { border-left-color: #757575; }

        /* ====== –ö–õ–ê–ù–´ ====== */
        .clan-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .clan-tag {
            display: inline-block;
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 0;
        }

        .clan-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .clan-form {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .clan-form input,
        .clan-form textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            color: white;
        }

        /* ====== –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ====== */
        .referral-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }

        .referral-code {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4fc3f7;
            margin: 20px 0;
            letter-spacing: 3px;
            background: rgba(79, 195, 247, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 2px dashed #4fc3f7;
        }

        .referral-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .referral-stat {
            background: rgba(79, 195, 247, 0.1);
            padding: 15px;
            border-radius: 10px;
        }

        .copy-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 10px 0;
            width: 100%;
        }

        /* ====== –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í ====== */
        .leaderboard-tabs {
            display: flex;
            overflow-x: auto;
            margin: 20px 0;
            gap: 5px;
        }

        .leaderboard-tabs button {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.08);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            white-space: nowrap;
        }

        .leaderboard-tabs button.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .leaderboard-table {
            margin-top: 20px;
        }

        .leaderboard-row {
            display: grid;
            grid-template-columns: 50px 1fr auto;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            margin: 5px 0;
            border-radius: 10px;
            align-items: center;
        }

        .leaderboard-row.me {
            background: linear-gradient(135deg, rgba(26, 115, 232, 0.2), transparent);
            border: 1px solid var(--primary);
        }

        .rank {
            font-size: 1.2rem;
            font-weight: bold;
            color: #4fc3f7;
        }

        .rank.gold { color: #ffd700; }
        .rank.silver { color: #c0c0c0; }
        .rank.bronze { color: #cd7f32; }

        /* ====== –ï–ñ–ï–î–ù–ï–í–ù–´–ï –ó–ê–î–ê–ù–ò–Ø ====== */
        .quests-container {
            margin: 20px 0;
        }

        .quest-item {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
            border-left: 4px solid #ff9800;
        }

        .quest-item.completed {
            border-left-color: #00e676;
            opacity: 0.8;
        }

        .quest-progress {
            margin: 15px 0;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff9800, #ff5722);
            transition: width 0.3s;
        }

        /* ====== –õ–ò–ú–ò–¢ –ö–õ–ò–ö–û–í ====== */
        .click-limit {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .limit-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .limit-fill {
            height: 100%;
            background: linear-gradient(90deg, #00c853, #00e676);
            transition: width 0.3s, background-color 0.3s;
        }

        .limit-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff9800, #ff5722);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        /* ====== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: rgba(0, 200, 83, 0.9);
            color: white;
            border-radius: 10px;
            transform: translateX(150%);
            transition: transform 0.3s;
            z-index: 1000;
            font-weight: bold;
            text-align: center;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: rgba(244, 67, 54, 0.9);
        }

        .notification.warning {
            background: rgba(255, 152, 0, 0.9);
        }

        /* ====== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ====== */
        @media (max-width: 600px) {
            .stats-grid { grid-template-columns: 1fr; }
            .click-btn { width: 150px; height: 150px; font-size: 1.3rem; }
            .players-container { flex-direction: column; gap: 20px; }
            .player { min-width: auto; }
            .clan-stats { grid-template-columns: 1fr; }
            .nft-shop { grid-template-columns: 1fr; }
            .leaderboard-row { grid-template-columns: 40px 1fr auto; gap: 10px; padding: 10px; }
        }
    </style>
</head>
<body>
    <!-- ====== –ù–ê–í–ò–ì–ê–¶–ò–Ø ====== -->
    <div class="nav-tabs">
        <button onclick="showSection('main')" class="active">
            <span>üéÆ</span> –ò–≥—Ä–∞
        </button>
        <button onclick="showSection('arena')">
            <span>‚öîÔ∏è</span> PvP
        </button>
        <button onclick="showSection('clans')">
            <span>üè∞</span> –ö–ª–∞–Ω—ã
        </button>
        <button onclick="showSection('nft')">
            <span>üé¥</span> NFT
        </button>
        <button onclick="showSection('referral')">
            <span>üë•</span> –†–µ—Ñ–µ—Ä–∞–ª—ã
        </button>
        <button onclick="showSection('leaderboard')">
            <span>üèÜ</span> –¢–æ–ø
        </button>
        <button onclick="showSection('quests')">
            <span>üìã</span> –ó–∞–¥–∞–Ω–∏—è
        </button>
    </div>

    <!-- ====== –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê ====== -->
    <div id="main-section" class="section active">
        <div class="container">
            <div class="header">
                <h1>‚Çø CRYPTO KOMBAT</h1>
                <p>–ö–ª–∏–∫–∞–π, –º–∞–π–Ω–∏ –∏ —Å—Ç–∞–Ω—å –∫—Ä–∏–ø—Ç–æ-–∫–æ—Ä–æ–ª—ë–º!</p>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>–ë–ê–õ–ê–ù–°</h3>
                    <div class="value" id="balance">0 ‚Çø</div>
                </div>
                <div class="stat-card">
                    <h3>–ó–ê –ö–õ–ò–ö</h3>
                    <div class="value" id="per-click">1 ‚Çø</div>
                </div>
                <div class="stat-card">
                    <h3>–£–†–û–í–ï–ù–¨</h3>
                    <div class="value" id="level">1</div>
                </div>
                <div class="stat-card">
                    <h3>–ê–í–¢–û-–î–û–•–û–î</h3>
                    <div class="value" id="passive-income">0 ‚Çø/—Å–µ–∫</div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –∫–ª–∏–∫–∞ -->
            <div style="text-align: center; margin: 30px 0;">
                <button class="click-btn" id="click-btn">
                    ‚õèÔ∏è –ú–ê–ô–ù–ò–¢–¨
                    <div style="font-size: 1rem; opacity: 0.9; margin-top: 10px; color: #00e676;">
                        +<span id="click-value">1</span> ‚Çø –∑–∞ –∫–ª–∏–∫
                    </div>
                </button>
            </div>

            <!-- –õ–∏–º–∏—Ç –∫–ª–∏–∫–æ–≤ -->
            <div class="click-limit">
                <div class="limit-bar">
                    <div class="limit-fill" id="limit-fill" style="width: 100%"></div>
                </div>
                <div class="limit-info">
                    <span>–ö–ª–∏–∫–æ–≤: <strong id="current-clicks">50</strong>/<strong id="max-clicks">50</strong></span>
                    <span id="reset-time">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: 2:00</span>
                </div>
                <button class="reset-btn" id="reset-btn" onclick="resetClickLimit()" style="display: none;">
                    üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç
                </button>
            </div>

            <!-- –£–ª—É—á—à–µ–Ω–∏—è -->
            <div style="margin-top: 40px;">
                <h2 style="text-align: center; margin-bottom: 20px; color: #4fc3f7;">‚ö° –£–õ–£–ß–®–ï–ù–ò–Ø</h2>
                <div class="upgrades-grid" id="upgrades-container">
                    <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>

            <!-- –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ -->
            <button class="action-btn" onclick="claimDaily()" style="margin-top: 30px; background: linear-gradient(135deg, #ff9800, #ff5722);">
                üéÅ –ü–û–õ–£–ß–ò–¢–¨ –ï–ñ–ï–î–ù–ï–í–ù–£–Æ –ù–ê–ì–†–ê–î–£
            </button>
        </div>
    </div>

    <!-- ====== PvP –ê–†–ï–ù–ê ====== -->
    <div id="arena-section" class="section">
        <div class="container">
            <div class="header">
                <h1>‚öîÔ∏è PvP –ê–†–ï–ù–ê</h1>
                <p>–°—Ä–∞–∂–∞–π—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏!</p>
            </div>

            <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ –±–æ–∏ -->
            <div id="active-battles">
                <h2 style="text-align: center; margin-bottom: 20px; color: #4fc3f7;">üî• –ê–∫—Ç–∏–≤–Ω—ã–µ –±–æ–∏</h2>
                <!-- –ë–æ–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>

            <!-- –ê—Ä–µ–Ω–∞ –¥–ª—è –±–æ—è -->
            <div class="pvp-arena" id="battle-arena" style="display: none;">
                <div class="battle-timer" id="battle-timer">60</div>
                
                <div class="players-container">
                    <div class="player">
                        <div id="player1-name">–í—ã</div>
                        <div class="player-score" id="player1-score">0</div>
                    </div>
                    
                    <div class="vs">VS</div>
                    
                    <div class="player">
                        <div id="player2-name">–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫</div>
                        <div class="player-score" id="player2-score">0</div>
                    </div>
                </div>

                <button class="action-btn" onclick="pvpClick()" id="pvp-click-btn" style="background: linear-gradient(135deg, #ff4444, #ff9800);">
                    ‚öîÔ∏è –ö–õ–ò–ö–ê–¢–¨ –í –ë–û–Æ!
                </button>
            </div>

            <!-- –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –±–æ–π -->
            <div style="margin-top: 40px;">
                <h2 style="text-align: center; margin-bottom: 20px; color: #4fc3f7;">üéØ –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –±–æ–π</h2>
                
                <div class="pvp-controls">
                    <button class="action-btn" onclick="startBotBattle()">
                        ü§ñ –ü—Ä–æ—Ç–∏–≤ –±–æ—Ç–∞ (100 ‚Çø)
                    </button>
                    <button class="action-btn" onclick="findPlayer()">
                        üë§ –ù–∞–π—Ç–∏ –∏–≥—Ä–æ–∫–∞
                    </button>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∏–ª–∞ PvP -->
            <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 15px;">
                <h3 style="color: #4fc3f7; margin-bottom: 10px;">üìú –ü—Ä–∞–≤–∏–ª–∞ PvP:</h3>
                <ul style="padding-left: 20px; opacity: 0.8;">
                    <li>–ë–æ–π –¥–ª–∏—Ç—Å—è 60 —Å–µ–∫—É–Ω–¥</li>
                    <li>–ü–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 10% –æ—Ç —Å—É–º–º—ã –∫–ª–∏–∫–æ–≤ –ø—Ä–æ–∏–≥—Ä–∞–≤—à–µ–≥–æ</li>
                    <li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–∑: 1,000,000 ‚Çø</li>
                    <li>–°–∏–ª–∞ –∫–ª–∏–∫–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ====== –ö–õ–ê–ù–´ ====== -->
    <div id="clans-section" class="section">
        <div class="container">
            <div class="header">
                <h1>üè∞ –ö–õ–ê–ù–´</h1>
                <p>–û–±—ä–µ–¥–∏–Ω—è–π—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏!</p>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞–Ω–µ -->
            <div id="clan-info" style="display: none;">
                <div class="clan-card">
                    <h3 id="clan-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞–Ω–∞</h3>
                    <div class="clan-tag" id="clan-tag">#TAG</div>
                    <p id="clan-description">–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞–Ω–∞</p>
                    
                    <div class="clan-stats">
                        <div class="stat-card">
                            <span>–£—á–∞—Å—Ç–Ω–∏–∫–∏:</span>
                            <strong id="clan-members">0</strong>
                        </div>
                        <div class="stat-card">
                            <span>–û–±—â–∞—è —Å–∏–ª–∞:</span>
                            <strong id="clan-power">0 ‚Çø</strong>
                        </div>
                        <div class="stat-card">
                            <span>–í–∞—à–∞ —Ä–æ–ª—å:</span>
                            <strong id="clan-role">–£—á–∞—Å—Ç–Ω–∏–∫</strong>
                        </div>
                    </div>
                    
                    <button class="action-btn" onclick="leaveClan()" style="background: var(--danger);">
                        üö™ –ü–æ–∫–∏–Ω—É—Ç—å –∫–ª–∞–Ω
                    </button>
                </div>
            </div>

            <!-- –°–æ–∑–¥–∞—Ç—å/–í—Å—Ç—É–ø–∏—Ç—å –≤ –∫–ª–∞–Ω -->
            <div id="no-clan">
                <!-- –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–Ω–∞ -->
                <div class="clan-form">
                    <h3 style="color: #4fc3f7; margin-bottom: 15px;">üè∞ –°–æ–∑–¥–∞—Ç—å –∫–ª–∞–Ω</h3>
                    <input type="text" id="clan-name-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞–Ω–∞" maxlength="20">
                    <input type="text" id="clan-tag-input" placeholder="–¢–µ–≥ (3-5 —Å–∏–º–≤–æ–ª–æ–≤)" maxlength="5">
                    <textarea id="clan-desc-input" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞–Ω–∞" maxlength="200" rows="3"></textarea>
                    <button class="action-btn" onclick="createClan()">
                        üè∞ –°–æ–∑–¥–∞—Ç—å –∫–ª–∞–Ω –∑–∞ 10,000 ‚Çø
                    </button>
                </div>
                
                <!-- –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –∫–ª–∞–Ω -->
                <div class="clan-form" style="margin-top: 30px;">
                    <h3 style="color: #4fc3f7; margin-bottom: 15px;">üë• –í—Å—Ç—É–ø–∏—Ç—å –≤ –∫–ª–∞–Ω</h3>
                    <input type="text" id="clan-tag-join" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥ –∫–ª–∞–Ω–∞">
                    <button class="action-btn" onclick="joinClan()">
                        üë• –í—Å—Ç—É–ø–∏—Ç—å –≤ –∫–ª–∞–Ω
                    </button>
                </div>
            </div>

            <!-- –¢–æ–ø –∫–ª–∞–Ω–æ–≤ -->
            <div style="margin-top: 40px;">
                <h2 style="text-align: center; margin-bottom: 20px; color: #4fc3f7;">üèÜ –¢–æ–ø –∫–ª–∞–Ω–æ–≤</h2>
                <div id="top-clans">
                    <!-- –ö–ª–∞–Ω—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- ====== NFT –°–ò–°–¢–ï–ú–ê ====== -->
    <div id="nft-section" class="section">
        <div class="container">
            <div class="header">
                <h1>üé¥ NFT –û–ë–û–†–£–î–û–í–ê–ù–ò–ï</h1>
                <p>–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–∏—Ä—É–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ!</p>
            </div>

            <!-- –ú–∞–≥–∞–∑–∏–Ω NFT -->
            <h2 style="text-align: center; margin: 20px 0; color: #4fc3f7;">üéÅ –ö—É–ø–∏—Ç—å NFT-–±–æ–∫—Å</h2>
            <div class="nft-shop">
                <div class="nft-box basic" onclick="buyNftBox('basic')">
                    <h3>ü•â –ë–ê–ó–û–í–´–ô</h3>
                    <p>–û–±—ã—á–Ω—ã–π: 70%</p>
                    <p>–ù–µ–æ–±—ã—á–Ω—ã–π: 20%</p>
                    <p>–†–µ–¥–∫–∏–π: 10%</p>
                    <div class="nft-price">10,000 ‚Çø</div>
                </div>
                
                <div class="nft-box premium" onclick="buyNftBox('premium')">
                    <h3>ü•à –ü–†–ï–ú–ò–£–ú</h3>
                    <p>–ù–µ–æ–±—ã—á–Ω—ã–π: 40%</p>
                    <p>–†–µ–¥–∫–∏–π: 30%</p>
                    <p>–≠–ø–∏—á–µ—Å–∫–∏–π: 25%</p>
                    <p>–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π: 5%</p>
                    <div class="nft-price">50,000 ‚Çø</div>
                </div>
                
                <div class="nft-box legendary" onclick="buyNftBox('legendary')">
                    <h3>ü•á –õ–ï–ì–ï–ù–î–ê–†–ù–´–ô</h3>
                    <p>–†–µ–¥–∫–∏–π: 30%</p>
                    <p>–≠–ø–∏—á–µ—Å–∫–∏–π: 40%</p>
                    <p>–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π: 30%</p>
                    <div class="nft-price">100,000 ‚Çø</div>
                </div>
            </div>

            <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å NFT -->
            <div class="nft-inventory">
                <h2 style="text-align: center; margin: 30px 0 20px 0; color: #4fc3f7;">üéí –í–∞—à–∏ NFT</h2>
                <div id="nft-inventory-container">
                    <!-- NFT –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- ====== –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ====== -->
    <div id="referral-section" class="section">
        <div class="container">
            <div class="header">
                <h1>üë• –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê</h1>
                <p>–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π –±–æ–Ω—É—Å—ã!</p>
            </div>

            <div class="referral-card">
                <h3 style="color: #4fc3f7;">–í–∞—à —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥:</h3>
                <div class="referral-code" id="referral-code">00000000</div>
                <p>–î–∞–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –¥—Ä—É–∑—å—è–º –∏ –ø–æ–ª—É—á–∞–π—Ç–µ 10% –æ—Ç –∏—Ö –∑–∞—Ä–∞–±–æ—Ç–∫–∞!</p>
                
                <div class="referral-stats">
                    <div class="referral-stat">
                        <span>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ:</span>
                        <strong id="referrals-count">0</strong>
                    </div>
                    <div class="referral-stat">
                        <span>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ:</span>
                        <strong id="referral-earnings">0 ‚Çø</strong>
                    </div>
                </div>
                
                <button class="copy-btn" onclick="copyReferralCode()">
                    üìã –ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–û–î
                </button>
                
                <div style="margin-top: 20px; font-size: 0.9rem; opacity: 0.8;">
                    <p>–ö–∞–∂–¥—ã–π –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–π –¥—Ä—É–≥ –ø—Ä–∏–Ω–æ—Å–∏—Ç –≤–∞–º:</p>
                    <ul style="margin-left: 20px;">
                        <li>10% –æ—Ç –∏—Ö –∑–∞—Ä–∞–±–æ—Ç–∫–∞</li>
                        <li>+1,000 ‚Çø –±–æ–Ω—É—Å –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é</li>
                        <li>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–Ω—Å—ã –≤ PvP</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ====== –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í ====== -->
    <div id="leaderboard-section" class="section">
        <div class="container">
            <div class="header">
                <h1>üèÜ –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í</h1>
                <p>–°–æ—Ä–µ–≤–Ω—É–π—Å—è —Å –ª—É—á—à–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏!</p>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ -->
            <div class="leaderboard-tabs">
                <button onclick="loadLeaderboard('balance')" class="active">üí∞ –ë–æ–≥–∞—Ç—Å—Ç–≤–æ</button>
                <button onclick="loadLeaderboard('clicks')">üëÜ –ö–ª–∏–∫–∏</button>
                <button onclick="loadLeaderboard('referrals')">üë• –†–µ—Ñ–µ—Ä–∞–ª—ã</button>
                <button onclick="loadLeaderboard('clans')">üè∞ –ö–ª–∞–Ω—ã</button>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ -->
            <div class="leaderboard-table" id="leaderboard-container">
                <!-- –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JS -->
            </div>

            <!-- –í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è -->
            <div style="margin-top: 30px; padding: 20px; background: rgba(26,115,232,0.1); border-radius: 15px;">
                <h3 style="color: #4fc3f7;">–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è:</h3>
                <div id="user-rank" style="font-size: 1.8rem; font-weight: bold; color: #4fc3f7; margin-top: 10px;">
                    –ó–∞–≥—Ä—É–∑–∫–∞...
                </div>
            </div>
        </div>
    </div>

    <!-- ====== –ï–ñ–ï–î–ù–ï–í–ù–´–ï –ó–ê–î–ê–ù–ò–Ø ====== -->
    <div id="quests-section" class="section">
        <div class="container">
            <div class="header">
                <h1>üìã –ï–ñ–ï–î–ù–ï–í–ù–´–ï –ó–ê–î–ê–ù–ò–Ø</h1>
                <p>–í—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π –Ω–∞–≥—Ä–∞–¥—ã!</p>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π -->
            <div class="quests-container" id="quests-container">
                <!-- –ó–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div style="margin-top: 30px; padding: 20px; background: rgba(255,152,0,0.1); border-radius: 15px;">
                <h3 style="color: #ff9800;">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>
                <p>–ó–∞–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC</p>
                <p>–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–Ω—ã—Ö –º–æ–Ω–µ—Ç!</p>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification"></div>

    <script>
        // ====== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TELEGRAM ======
        let tg = null;
        let userData = {};
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram Web App
        function initTelegram() {
            try {
                if (window.Telegram && Telegram.WebApp) {
                    tg = Telegram.WebApp;
                    tg.ready();
                    tg.expand();
                    
                    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
                    if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                        userData = {
                            id: tg.initDataUnsafe.user.id,
                            username: tg.initDataUnsafe.user.username || `user${tg.initDataUnsafe.user.id}`,
                            firstName: tg.initDataUnsafe.user.first_name || '–ò–≥—Ä–æ–∫'
                        };
                        console.log('Telegram user:', userData);
                    } else {
                        // –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
                        userData = {
                            id: Date.now(),
                            username: 'TestUser',
                            firstName: '–¢–µ—Å—Ç–æ–≤—ã–π'
                        };
                        console.log('Test user created:', userData);
                    }
                    return true;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram:', error);
            }
            
            // –ï—Å–ª–∏ Telegram –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, —Å–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            userData = {
                id: Date.now(),
                username: 'TestUser',
                firstName: '–¢–µ—Å—Ç–æ–≤—ã–π'
            };
            console.warn('Telegram Web App –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º.');
            return false;
        }

        // ====== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ======
        let gameState = {
            balance: 10000,
            per_click: 1,
            passive_per_sec: 0,
            level: 1,
            experience: 0,
            total_clicks: 0,
            click_limit: 50,
            click_limit_used: 0,
            click_limit_reset: Date.now() + 120000,
            daily_streak: 0,
            referrals_count: 0,
            referral_earnings: 0,
            clan: null,
            upgrades: {
                basic_rig: 0,
                gpu_farm: 0,
                asic_miner: 0,
                mining_pool: 0,
                click_limit_boost: 0,
                referral_boost: 0
            },
            nfts: [],
            daily_quests: [
                { type: 'click', target: 100, current: 0, reward: 500, completed: false },
                { type: 'buy_upgrade', target: 3, current: 0, reward: 1000, completed: false },
                { type: 'pvp_win', target: 1, current: 0, reward: 2000, completed: false }
            ],
            active_battle: null,
            referral_code: generateReferralCode()
        };

        let upgrades = [
            { id: 'basic_rig', name: 'üì± –ë–∞–∑–æ–≤—ã–π —Ä–∏–≥', desc: '–ü—Ä–æ—Å—Ç–∞—è –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', cost: 100, click: 1, passive: 0.1 },
            { id: 'gpu_farm', name: 'üíª GPU –§–µ—Ä–º–∞', desc: '–ù–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç', cost: 500, click: 5, passive: 0.5 },
            { id: 'asic_miner', name: '‚ö° ASIC –ú–∞–π–Ω–µ—Ä', desc: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä', cost: 2000, click: 20, passive: 2 },
            { id: 'mining_pool', name: 'üèä‚Äç‚ôÇÔ∏è –ú–∞–π–Ω–∏–Ω–≥-–ø—É–ª', desc: '–û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å', cost: 5000, click: 50, passive: 5 },
            { id: 'click_limit_boost', name: '‚ö° –£–ª—É—á—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞', desc: '+10 –∫ –ª–∏–º–∏—Ç—É –∫–ª–∏–∫–æ–≤', cost: 1000, limit_bonus: 10 },
            { id: 'referral_boost', name: 'üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±—É—Å—Ç', desc: '+10% –∫ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–º—É –¥–æ—Ö–æ–¥—É', cost: 5000, referral_bonus: 0.1 }
        ];

        let nftItems = [
            { id: 'golden_rig', name: 'üî• –ó–æ–ª–æ—Ç–æ–π –†–∏–≥', rarity: 'legendary', bonus: 2.0 },
            { id: 'quantum_miner', name: '‚öõÔ∏è –ö–≤–∞–Ω—Ç–æ–≤—ã–π –ú–∞–π–Ω–µ—Ä', rarity: 'epic', bonus: 1.5 },
            { id: 'ai_trader', name: 'üß† AI –¢—Ä–µ–π–¥–µ—Ä', rarity: 'rare', bonus: 1.3 },
            { id: 'crypto_cpu', name: 'üíé –ö—Ä–∏–ø—Ç–æ-–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', rarity: 'uncommon', bonus: 1.2 },
            { id: 'basic_gpu', name: 'üìä –ë–∞–∑–æ–≤–∞—è GPU', rarity: 'common', bonus: 1.1 }
        ];

        let battleTimer = null;
        let battleTimeLeft = 60;
        let battleInterval = null;

        // ====== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò –ò–ì–†–´ ======
        async function initGame() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram
            const isTelegram = initTelegram();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–≥—Ä—É
            await loadGame();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            renderUpgrades();
            loadAllSections();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã
            startPassiveIncome();
            startClickLimitTimer();
            startAutoSave();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (isTelegram) {
                showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${userData.firstName}!`, 'success');
            } else {
                showNotification('–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ Telegram.', 'warning');
            }
        }

        async function loadGame() {
            try {
                // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ Telegram CloudStorage
                if (tg && tg.CloudStorage) {
                    const saved = await tg.CloudStorage.getItem('cryptoKombatSave');
                    if (saved) {
                        const parsed = JSON.parse(saved);
                        gameState = { ...gameState, ...parsed };
                        console.log('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ CloudStorage');
                        return;
                    }
                }
                
                // –ï—Å–ª–∏ –Ω–µ—Ç Telegram, –ø—Ä–æ–±—É–µ–º localStorage
                const saved = localStorage.getItem('cryptoKombatSave');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    gameState = { ...gameState, ...parsed };
                    console.log('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ localStorage');
                }
            } catch (e) {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã:', e);
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            }
        }

        async function saveGame() {
            try {
                const saveData = JSON.stringify(gameState);
                
                // –ü—Ä–æ–±—É–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Telegram CloudStorage
                if (tg && tg.CloudStorage) {
                    await tg.CloudStorage.setItem('cryptoKombatSave', saveData);
                    console.log('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ CloudStorage');
                    return;
                }
                
                // –ï—Å–ª–∏ –Ω–µ—Ç Telegram, –∏—Å–ø–æ–ª—å–∑—É–µ–º localStorage
                localStorage.setItem('cryptoKombatSave', saveData);
                console.log('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ localStorage');
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–≥—Ä—ã:', e);
            }
        }

        function updateUI() {
            document.getElementById('balance').textContent = Math.floor(gameState.balance).toLocaleString() + ' ‚Çø';
            document.getElementById('per-click').textContent = gameState.per_click.toLocaleString() + ' ‚Çø';
            document.getElementById('click-value').textContent = gameState.per_click;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('passive-income').textContent = gameState.passive_per_sec.toFixed(1) + ' ‚Çø/—Å–µ–∫';
            document.getElementById('referrals-count').textContent = gameState.referrals_count;
            document.getElementById('referral-earnings').textContent = gameState.referral_earnings.toLocaleString() + ' ‚Çø';
            document.getElementById('referral-code').textContent = gameState.referral_code;
            
            updateClickLimit();
        }

        // ====== –°–ò–°–¢–ï–ú–ê –ö–õ–ò–ö–û–í ======
        let clickCount = 0;
        let clickTimeout;

        document.getElementById('click-btn').addEventListener('click', () => {
            if (gameState.click_limit_used >= gameState.click_limit) {
                showNotification('–õ–∏–º–∏—Ç –∫–ª–∏–∫–æ–≤ –∏—Å—á–µ—Ä–ø–∞–Ω!', 'error');
                return;
            }
            
            clickCount++;
            gameState.click_limit_used++;
            
            // –¢–∞–∫—Ç–∏–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ (—Ç–æ–ª—å–∫–æ –≤ Telegram)
            if (tg && tg.HapticFeedback) {
                try {
                    tg.HapticFeedback.impactOccurred('light');
                } catch (e) {
                    console.log('–¢–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ—Ç–¥–∞—á–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                }
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            const clickBtn = document.getElementById('click-btn');
            clickBtn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                clickBtn.style.transform = 'scale(1)';
            }, 100);
            
            updateClickLimit();
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª–∏–∫–æ–≤
            clearTimeout(clickTimeout);
            clickTimeout = setTimeout(() => {
                processClicks(clickCount);
                clickCount = 0;
            }, 300);
        });

        function processClicks(clicks) {
            const coinsEarned = clicks * gameState.per_click;
            
            gameState.balance += coinsEarned;
            gameState.total_clicks += clicks;
            gameState.experience += clicks * 0.1;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π
            if (gameState.daily_quests[0]) {
                gameState.daily_quests[0].current += clicks;
                if (gameState.daily_quests[0].current >= gameState.daily_quests[0].target && !gameState.daily_quests[0].completed) {
                    gameState.daily_quests[0].completed = true;
                    gameState.balance += gameState.daily_quests[0].reward;
                    showNotification(`–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! +${gameState.daily_quests[0].reward} ‚Çø`, 'success');
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è
            const requiredExp = gameState.level * 100;
            if (gameState.experience >= requiredExp) {
                gameState.level++;
                gameState.experience -= requiredExp;
                gameState.per_click += 1;
                showNotification(`üéâ –£—Ä–æ–≤–µ–Ω—å ${gameState.level}!`, 'success');
            }
            
            updateUI();
            saveGame();
        }

        // ====== –£–õ–£–ß–®–ï–ù–ò–Ø ======
        function buyUpgrade(upgradeId) {
            const upgrade = upgrades.find(u => u.id === upgradeId);
            if (!upgrade) return;
            
            const currentLevel = gameState.upgrades[upgradeId] || 0;
            const cost = Math.floor(upgrade.cost * Math.pow(1.5, currentLevel));
            
            if (gameState.balance < cost) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!', 'error');
                return;
            }
            
            gameState.balance -= cost;
            gameState.upgrades[upgradeId] = currentLevel + 1;
            
            if (upgrade.click) {
                gameState.per_click += upgrade.click;
                gameState.passive_per_sec += upgrade.passive || 0;
            }
            if (upgrade.limit_bonus) {
                gameState.click_limit += upgrade.limit_bonus;
            }
            if (upgrade.referral_bonus) {
                // –õ–æ–≥–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π
            if (gameState.daily_quests[1]) {
                gameState.daily_quests[1].current++;
                if (gameState.daily_quests[1].current >= gameState.daily_quests[1].target && !gameState.daily_quests[1].completed) {
                    gameState.daily_quests[1].completed = true;
                    gameState.balance += gameState.daily_quests[1].reward;
                    showNotification(`–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! +${gameState.daily_quests[1].reward} ‚Çø`, 'success');
                }
            }
            
            updateUI();
            renderUpgrades();
            saveGame();
            showNotification(`–ö—É–ø–ª–µ–Ω–æ: ${upgrade.name}`, 'success');
        }

        function renderUpgrades() {
            const container = document.getElementById('upgrades-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            upgrades.forEach(upgrade => {
                const currentLevel = gameState.upgrades[upgrade.id] || 0;
                const cost = Math.floor(upgrade.cost * Math.pow(1.5, currentLevel));
                const canBuy = gameState.balance >= cost;
                
                const card = document.createElement('div');
                card.className = 'upgrade-card';
                card.style.background = 'rgba(255, 255, 255, 0.08)';
                card.style.padding = '15px';
                card.style.borderRadius = '10px';
                card.style.margin = '10px 0';
                card.style.border = '1px solid rgba(255, 255, 255, 0.1)';
                
                card.innerHTML = `
                    <h3 style="color: #4fc3f7; margin-bottom: 10px;">${upgrade.name} (${currentLevel})</h3>
                    <p style="opacity: 0.8; margin-bottom: 10px;">${upgrade.desc}</p>
                    <div style="color: #00e676; margin: 10px 0;">
                        ${upgrade.click ? `+${upgrade.click} –∫ –∫–ª–∏–∫—É` : ''}
                        ${upgrade.passive ? `<br>+${upgrade.passive} ‚Çø/—Å–µ–∫` : ''}
                        ${upgrade.limit_bonus ? `<br>+${upgrade.limit_bonus} –∫ –ª–∏–º–∏—Ç—É` : ''}
                        ${upgrade.referral_bonus ? `<br>+${upgrade.referral_bonus * 100}% –∫ —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º` : ''}
                    </div>
                    <button class="buy-btn" onclick="buyUpgrade('${upgrade.id}')" ${!canBuy ? 'disabled' : ''}>
                        ${currentLevel === 0 ? '–ö–£–ü–ò–¢–¨' : '–£–õ–£–ß–®–ò–¢–¨'} –ó–ê ${cost.toLocaleString()} ‚Çø
                    </button>
                `;
                container.appendChild(card);
            });
        }

        // ====== PvP –°–ò–°–¢–ï–ú–ê ======
        function startBotBattle() {
            if (gameState.balance < 100) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!', 'error');
                return;
            }
            
            gameState.balance -= 100;
            gameState.active_battle = {
                id: Date.now(),
                opponent: 'ü§ñ –ë–æ—Ç-–º–∞–π–Ω–µ—Ä',
                player_score: 0,
                opponent_score: 0,
                time_left: 60
            };
            
            startBattleTimer();
            showNotification('–ë–æ–π —Å –±–æ—Ç–æ–º –Ω–∞—á–∞—Ç!', 'success');
            updatePvPDisplay();
            updateUI();
        }

        function findPlayer() {
            showNotification('–ü–æ–∏—Å–∫ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞...', 'warning');
            setTimeout(() => {
                gameState.active_battle = {
                    id: Date.now(),
                    opponent: 'üë§ –ò–≥—Ä–æ–∫#' + Math.floor(Math.random() * 1000),
                    player_score: 0,
                    opponent_score: 0,
                    time_left: 60
                };
                startBattleTimer();
                showNotification('–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫ –Ω–∞–π–¥–µ–Ω!', 'success');
                updatePvPDisplay();
            }, 2000);
        }

        function startBattleTimer() {
            battleTimeLeft = 60;
            clearInterval(battleInterval);
            
            document.getElementById('battle-arena').style.display = 'block';
            document.getElementById('player2-name').textContent = gameState.active_battle.opponent;
            
            battleInterval = setInterval(() => {
                battleTimeLeft--;
                document.getElementById('battle-timer').textContent = battleTimeLeft;
                
                if (battleTimeLeft <= 0) {
                    endBattle();
                }
            }, 1000);
        }

        function pvpClick() {
            if (!gameState.active_battle) return;
            
            gameState.active_battle.player_score += gameState.per_click;
            document.getElementById('player1-score').textContent = gameState.active_battle.player_score;
            
            // –ö–ª–∏–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (–±–æ—Ç –∏–ª–∏ –∏–≥—Ä–æ–∫)
            const opponentClick = Math.floor(Math.random() * 15) + 1;
            gameState.active_battle.opponent_score += opponentClick;
            document.getElementById('player2-score').textContent = gameState.active_battle.opponent_score;
            
            // –¢–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ—Ç–¥–∞—á–∞
            if (tg && tg.HapticFeedback) {
                try {
                    tg.HapticFeedback.impactOccurred('medium');
                } catch (e) {
                    console.log('–¢–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ—Ç–¥–∞—á–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                }
            }
        }

        function endBattle() {
            clearInterval(battleInterval);
            
            if (!gameState.active_battle) return;
            
            const playerWon = gameState.active_battle.player_score > gameState.active_battle.opponent_score;
            const reward = Math.floor(Math.min(gameState.active_battle.player_score, gameState.active_battle.opponent_score) * 0.1);
            
            if (playerWon) {
                gameState.balance += reward;
                if (gameState.daily_quests[2]) {
                    gameState.daily_quests[2].current++;
                    
                    if (gameState.daily_quests[2].current >= gameState.daily_quests[2].target && !gameState.daily_quests[2].completed) {
                        gameState.daily_quests[2].completed = true;
                        gameState.balance += gameState.daily_quests[2].reward;
                    }
                }
                
                showNotification(`–ü–æ–±–µ–¥–∞! +${reward} ‚Çø`, 'success');
            } else {
                showNotification('–ü–æ—Ä–∞–∂–µ–Ω–∏–µ!', 'error');
            }
            
            gameState.active_battle = null;
            updatePvPDisplay();
            updateUI();
            saveGame();
        }

        function updatePvPDisplay() {
            const battleArena = document.getElementById('battle-arena');
            if (!battleArena) return;
            
            if (gameState.active_battle) {
                battleArena.style.display = 'block';
                document.getElementById('player1-score').textContent = gameState.active_battle.player_score;
                document.getElementById('player2-score').textContent = gameState.active_battle.opponent_score;
            } else {
                battleArena.style.display = 'none';
            }
        }

        // ====== NFT –°–ò–°–¢–ï–ú–ê ======
        function buyNftBox(type) {
            const prices = { basic: 10000, premium: 50000, legendary: 100000 };
            const price = prices[type];
            
            if (gameState.balance < price) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!', 'error');
                return;
            }
            
            gameState.balance -= price;
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–¥–∫–æ—Å—Ç–∏
            const weights = {
                basic: [0.7, 0.2, 0.1, 0.0, 0.0],
                premium: [0.0, 0.4, 0.3, 0.25, 0.05],
                legendary: [0.0, 0.0, 0.3, 0.4, 0.3]
            };
            
            const rarityIndex = weightedRandom(weights[type]);
            const nft = nftItems[rarityIndex];
            
            gameState.nfts.push({
                id: Date.now(),
                name: nft.name,
                rarity: nft.rarity,
                bonus: nft.bonus,
                equipped: false
            });
            
            updateUI();
            loadUserNfts();
            showNotification(`–ü–æ–ª—É—á–µ–Ω NFT: ${nft.name} (${nft.rarity})!`, 'success');
            saveGame();
        }

        function weightedRandom(weights) {
            let sum = weights.reduce((a, b) => a + b, 0);
            let r = Math.random() * sum;
            for (let i = 0; i < weights.length; i++) {
                r -= weights[i];
                if (r < 0) return i;
            }
            return weights.length - 1;
        }

        function equipNft(nftId) {
            const nftIndex = gameState.nfts.findIndex(n => n.id === nftId);
            if (nftIndex === -1) return;
            
            // –°–Ω–∏–º–∞–µ–º —Ç–µ–∫—É—â–∏–π NFT
            gameState.nfts.forEach(n => n.equipped = false);
            
            // –≠–∫–∏–ø–∏—Ä—É–µ–º –Ω–æ–≤—ã–π
            gameState.nfts[nftIndex].equipped = true;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å
            const nft = gameState.nfts[nftIndex];
            
            // –°–Ω–∞—á–∞–ª–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –±–æ–Ω—É—Å—ã NFT
            gameState.per_click = 1; // –ë–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å—ã —É–ª—É—á—à–µ–Ω–∏–π
            if (gameState.upgrades.basic_rig) {
                gameState.per_click += upgrades[0].click * gameState.upgrades.basic_rig;
            }
            if (gameState.upgrades.gpu_farm) {
                gameState.per_click += upgrades[1].click * gameState.upgrades.gpu_farm;
            }
            if (gameState.upgrades.asic_miner) {
                gameState.per_click += upgrades[2].click * gameState.upgrades.asic_miner;
            }
            if (gameState.upgrades.mining_pool) {
                gameState.per_click += upgrades[3].click * gameState.upgrades.mining_pool;
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å NFT
            gameState.per_click = Math.floor(gameState.per_click * nft.bonus);
            
            updateUI();
            loadUserNfts();
            showNotification(`NFT "${nft.name}" —ç–∫–∏–ø–∏—Ä–æ–≤–∞–Ω! –ë–æ–Ω—É—Å: √ó${nft.bonus}`, 'success');
            saveGame();
        }

        function loadUserNfts() {
            const container = document.getElementById('nft-inventory-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (gameState.nfts.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">–£ –≤–∞—Å –Ω–µ—Ç NFT –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</p>';
                return;
            }
            
            gameState.nfts.forEach(nft => {
                const item = document.createElement('div');
                item.className = `nft-item ${nft.rarity}`;
                item.innerHTML = `
                    <div>
                        <h4>${nft.name}</h4>
                        <div style="opacity: 0.8;">${nft.rarity} | –ë–æ–Ω—É—Å: √ó${nft.bonus}</div>
                    </div>
                    <button onclick="equipNft(${nft.id})" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); border: none; padding: 8px 15px; border-radius: 5px; color: white; font-weight: bold; cursor: pointer;" ${nft.equipped ? 'disabled style="opacity: 0.5;"' : ''}>
                        ${nft.equipped ? '‚úÖ –≠–∫–∏–ø–∏—Ä–æ–≤–∞–Ω' : '‚ö° –≠–∫–∏–ø–∏—Ä–æ–≤–∞—Ç—å'}
                    </button>
                `;
                container.appendChild(item);
            });
        }

        // ====== –ö–õ–ê–ù–´ ======
        function createClan() {
            const name = document.getElementById('clan-name-input').value;
            const tag = document.getElementById('clan-tag-input').value;
            const description = document.getElementById('clan-desc-input').value;
            
            if (!name || !tag) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ç–µ–≥ –∫–ª–∞–Ω–∞', 'error');
                return;
            }
            
            if (gameState.balance < 10000) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤! –ù—É–∂–Ω–æ 10,000 ‚Çø', 'error');
                return;
            }
            
            gameState.balance -= 10000;
            gameState.clan = {
                name: name,
                tag: tag,
                description: description,
                role: 'owner',
                members: 1,
                power: gameState.balance
            };
            
            updateUI();
            loadClanInfo();
            showNotification(`–ö–ª–∞–Ω "${name}" —Å–æ–∑–¥–∞–Ω!`, 'success');
            saveGame();
        }

        function joinClan() {
            const tag = document.getElementById('clan-tag-join').value;
            
            if (!tag) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥ –∫–ª–∞–Ω–∞', 'error');
                return;
            }
            
            // –≠–º—É–ª—è—Ü–∏—è –∫–ª–∞–Ω–∞
            if (tag === 'CRYPTO' || tag === 'MINER' || tag === 'BITCOIN') {
                gameState.clan = {
                    name: '–ö–ª–∞–Ω ' + tag,
                    tag: tag,
                    description: '–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞–Ω',
                    role: 'member',
                    members: 5,
                    power: 50000
                };
                
                loadClanInfo();
                showNotification('–í—ã –≤—Å—Ç—É–ø–∏–ª–∏ –≤ –∫–ª–∞–Ω!', 'success');
                saveGame();
            } else {
                showNotification('–ö–ª–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
            }
        }

        function leaveClan() {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å –∫–ª–∞–Ω?')) return;
            
            gameState.clan = null;
            loadClanInfo();
            showNotification('–í—ã –ø–æ–∫–∏–Ω—É–ª–∏ –∫–ª–∞–Ω', 'warning');
            saveGame();
        }

        function loadClanInfo() {
            const clanInfo = document.getElementById('clan-info');
            const noClan = document.getElementById('no-clan');
            
            if (!clanInfo || !noClan) return;
            
            if (gameState.clan) {
                clanInfo.style.display = 'block';
                noClan.style.display = 'none';
                
                document.getElementById('clan-name').textContent = gameState.clan.name;
                document.getElementById('clan-tag').textContent = '#' + gameState.clan.tag;
                document.getElementById('clan-description').textContent = gameState.clan.description;
                document.getElementById('clan-role').textContent = gameState.clan.role;
                document.getElementById('clan-members').textContent = gameState.clan.members;
                document.getElementById('clan-power').textContent = gameState.clan.power.toLocaleString() + ' ‚Çø';
            } else {
                clanInfo.style.display = 'none';
                noClan.style.display = 'block';
            }
        }

        // ====== –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ======
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function copyReferralCode() {
            const code = gameState.referral_code;
            const text = `–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ Crypto Kombat! –ò—Å–ø–æ–ª—å–∑—É–π –º–æ–π –∫–æ–¥: ${code}`;
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text)
                    .then(() => showNotification('–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!', 'success'))
                    .catch(() => fallbackCopy(text));
            } else {
                fallbackCopy(text);
            }
        }

        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showNotification('–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!', 'success');
            } catch (err) {
                showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥', 'error');
            }
            
            document.body.removeChild(textArea);
        }

        // ====== –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í ======
        function loadLeaderboard(type) {
            const container = document.getElementById('leaderboard-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.leaderboard-tabs button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // –≠–º—É–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
            const mockData = [];
            for (let i = 1; i <= 10; i++) {
                if (type === 'balance') {
                    mockData.push({
                        username: `–ò–≥—Ä–æ–∫${i}`,
                        value: Math.floor(Math.random() * 1000000),
                        level: Math.floor(Math.random() * 50) + 1
                    });
                } else if (type === 'clicks') {
                    mockData.push({
                        username: `–ò–≥—Ä–æ–∫${i}`,
                        value: Math.floor(Math.random() * 100000),
                        level: Math.floor(Math.random() * 50) + 1
                    });
                } else if (type === 'clans') {
                    mockData.push({
                        name: `–ö–ª–∞–Ω${i}`,
                        tag: `TAG${i}`,
                        members: Math.floor(Math.random() * 50) + 1,
                        power: Math.floor(Math.random() * 500000)
                    });
                }
            }
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
            mockData.sort((a, b) => b.value - a.value);
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            mockData.forEach((item, index) => {
                const isMe = item.username && item.username.includes('–ò–≥—Ä–æ–∫1');
                const row = document.createElement('div');
                row.className = `leaderboard-row ${isMe ? 'me' : ''}`;
                
                let rankClass = '';
                if (index === 0) rankClass = 'gold';
                else if (index === 1) rankClass = 'silver';
                else if (index === 2) rankClass = 'bronze';
                
                let valueText = '';
                if (type === 'balance') valueText = `${item.value.toLocaleString()} ‚Çø`;
                else if (type === 'clicks') valueText = `${item.value.toLocaleString()} –∫–ª–∏–∫–æ–≤`;
                else if (type === 'clans') valueText = `${item.power.toLocaleString()} ‚Çø`;
                
                row.innerHTML = `
                    <div class="rank ${rankClass}">${index + 1}</div>
                    <div>
                        <strong>${item.username || item.name || '–ê–Ω–æ–Ω–∏–º'}</strong>
                        ${item.level ? `<br><small>–£—Ä. ${item.level}</small>` : ''}
                        ${item.tag ? `<br><small>#${item.tag}</small>` : ''}
                    </div>
                    <div style="font-weight: bold; color: #00e676;">${valueText}</div>
                `;
                
                container.appendChild(row);
            });
            
            // –ü–æ–∑–∏—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userRank = Math.floor(Math.random() * 100) + 1;
            document.getElementById('user-rank').textContent = `#${userRank}`;
        }

        // ====== –ï–ñ–ï–î–ù–ï–í–ù–´–ï –ó–ê–î–ê–ù–ò–Ø ======
        function loadDailyQuests() {
            const container = document.getElementById('quests-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            gameState.daily_quests.forEach(quest => {
                const progress = Math.min((quest.current / quest.target) * 100, 100);
                const completed = quest.completed;
                
                const questItem = document.createElement('div');
                questItem.className = `quest-item ${completed ? 'completed' : ''}`;
                questItem.innerHTML = `
                    <h4>${getQuestName(quest.type)}</h4>
                    <div class="quest-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span>${quest.current}/${quest.target}</span>
                            <span>${completed ? '‚úÖ' : '‚è≥'}</span>
                        </div>
                    </div>
                    <div style="color: #00e676; font-weight: bold; margin-top: 10px;">
                        –ù–∞–≥—Ä–∞–¥–∞: ${quest.reward.toLocaleString()} ‚Çø
                    </div>
                `;
                
                container.appendChild(questItem);
            });
        }

        function getQuestName(type) {
            const names = {
                'click': '–°–¥–µ–ª–∞—Ç—å –∫–ª–∏–∫–æ–≤',
                'buy_upgrade': '–ö—É–ø–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–π',
                'pvp_win': '–í—ã–∏–≥—Ä–∞—Ç—å PvP –±–æ–µ–≤'
            };
            return names[type] || type;
        }

        function claimDaily() {
            const today = new Date().toDateString();
            const lastClaim = localStorage.getItem('lastDailyClaim');
            
            if (lastClaim === today) {
                showNotification('–í—ã —É–∂–µ –ø–æ–ª—É—á–∞–ª–∏ –Ω–∞–≥—Ä–∞–¥—É —Å–µ–≥–æ–¥–Ω—è', 'error');
                return;
            }
            
            const baseReward = 1000;
            const streakBonus = gameState.daily_streak * 200;
            const totalReward = baseReward + streakBonus;
            
            gameState.balance += totalReward;
            gameState.daily_streak++;
            localStorage.setItem('lastDailyClaim', today);
            
            updateUI();
            saveGame();
            showNotification(`–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞: +${totalReward} ‚Çø! –°–µ—Ä–∏—è: ${gameState.daily_streak} –¥–Ω–µ–π`, 'success');
        }

        // ====== –õ–ò–ú–ò–¢ –ö–õ–ò–ö–û–í ======
        function updateClickLimit() {
            const used = gameState.click_limit_used;
            const total = gameState.click_limit;
            const percentage = Math.max(0, ((total - used) / total) * 100);
            
            const limitFill = document.getElementById('limit-fill');
            if (limitFill) {
                limitFill.style.width = `${percentage}%`;
            }
            
            document.getElementById('current-clicks').textContent = total - used;
            document.getElementById('max-clicks').textContent = total;
            
            const resetBtn = document.getElementById('reset-btn');
            if (resetBtn) {
                if (used >= total) {
                    resetBtn.style.display = 'block';
                    if (limitFill) {
                        limitFill.style.background = 'linear-gradient(90deg, #ff4444, #ff9800)';
                    }
                } else {
                    resetBtn.style.display = 'none';
                    if (limitFill) {
                        limitFill.style.background = 'linear-gradient(90deg, #00c853, #00e676)';
                    }
                }
            }
        }

        function startClickLimitTimer() {
            setInterval(() => {
                const now = Date.now();
                if (now >= gameState.click_limit_reset) {
                    gameState.click_limit_used = 0;
                    gameState.click_limit_reset = now + 120000;
                    updateClickLimit();
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
                const timeLeft = Math.max(0, gameState.click_limit_reset - now);
                const minutes = Math.floor(timeLeft / 60000);
                const seconds = Math.floor((timeLeft % 60000) / 1000);
                const resetTimeElement = document.getElementById('reset-time');
                if (resetTimeElement) {
                    resetTimeElement.textContent = 
                        `–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
                    
            }, 1000);
        }

        function resetClickLimit() {
            if (gameState.click_limit_used < gameState.click_limit) {
                showNotification('–õ–∏–º–∏—Ç –µ—â–µ –Ω–µ –∏—Å—á–µ—Ä–ø–∞–Ω!', 'warning');
                return;
            }
            
            // –°—Ç–æ–∏–º–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
            const cost = 1000;
            if (gameState.balance < cost) {
                showNotification(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤! –ù—É–∂–Ω–æ ${cost} ‚Çø`, 'error');
                return;
            }
            
            gameState.balance -= cost;
            gameState.click_limit_used = 0;
            gameState.click_limit_reset = Date.now() + 120000;
            updateClickLimit();
            updateUI();
            saveGame();
            showNotification('–õ–∏–º–∏—Ç –∫–ª–∏–∫–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!', 'success');
        }

        // ====== –ü–ê–°–°–ò–í–ù–´–ô –î–û–•–û–î ======
        function startPassiveIncome() {
            setInterval(() => {
                if (gameState.passive_per_sec > 0) {
                    gameState.balance += gameState.passive_per_sec / 10;
                    updateUI();
                    saveGame();
                }
            }, 100);
        }

        // ====== –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–ï ======
        function startAutoSave() {
            setInterval(() => {
                saveGame();
            }, 30000);
        }

        // ====== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ======
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            if (!notification) return;
            
            notification.textContent = message;
            notification.className = 'notification';
            
            if (type === 'error') {
                notification.classList.add('error');
            } else if (type === 'warning') {
                notification.classList.add('warning');
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function showSection(sectionId) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å–µ–∫—Ü–∏—é
            const section = document.getElementById(`${sectionId}-section`);
            if (section) {
                section.classList.add('active');
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.querySelectorAll('.nav-tabs button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–µ–∫—Ü–∏–∏
            switch(sectionId) {
                case 'arena':
                    updatePvPDisplay();
                    break;
                case 'nft':
                    loadUserNfts();
                    break;
                case 'clans':
                    loadClanInfo();
                    break;
                case 'quests':
                    loadDailyQuests();
                    break;
                case 'leaderboard':
                    loadLeaderboard('balance');
                    break;
            }
        }

        function loadAllSections() {
            loadUserNfts();
            loadClanInfo();
            loadDailyQuests();
            loadLeaderboard('balance');
            updatePvPDisplay();
        }

        // ====== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ======
        window.buyUpgrade = buyUpgrade;
        window.buyNftBox = buyNftBox;
        window.equipNft = equipNft;
        window.createClan = createClan;
        window.joinClan = joinClan;
        window.leaveClan = leaveClan;
        window.findPlayer = findPlayer;
        window.startBotBattle = startBotBattle;
        window.pvpClick = pvpClick;
        window.loadLeaderboard = loadLeaderboard;
        window.copyReferralCode = copyReferralCode;
        window.resetClickLimit = resetClickLimit;
        window.claimDaily = claimDaily;
        window.showSection = showSection;

        // ====== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ======
        document.addEventListener('DOMContentLoaded', () => {
            initGame();
        });
    </script>
</body>
</html>